# 移动端页面最佳构建指南

本文总结自 [awwwards.com/mobile-guidelines](https://www.awwwards.com/mobile-guidelines/)

对于移动端网站的评估，专业人士给出了四个角度：

1. 移动端友好度

2. 性能

3. 易用性

4. PWA / 最佳实践

下面依次进行详细解读

## 移动端友好度 Mobile Friendliness

### 响应式界面

设置视口 meta

调整内容大小

CSS 媒体查询

使用相对单位

媒体查询的边界

### 内容的大小应等于视口

来自 `lighthouse` 的一条规则

[https://developers.google.com/web/tools/lighthouse/audits/content-sized-correctly-for-viewport](https://developers.google.com/web/tools/lighthouse/audits/content-sized-correctly-for-viewport)

通过 `window.innerWidth === window.outerWidth` 来检查

目的是判断页面内容的宽度是否等于视口宽度，若不等，则说明该页面没有针对移动设备屏幕进行优化

### 点击目标的大小

建议的最小触摸目标大小约为 48dp，大约是9毫米宽高的区域

若目标元素较小，可通过 padding 扩大

不同可点击目标之间在水平和垂直方向上应留出大约 8dp 的间隔，防止误触

### 字体要清晰

小于12px的文字很难阅读，`lighthouse` 规定至少60%的文字的字体大小需要大于等于12px

### 色彩对比度

确保所有文本元素在前景色和后景色之间具有足够的色彩对比

小字体文本的颜色对比度至少为 4.5 : 1

大字体文本的颜色对比度至少为 3 : 1。

大字体指18pt（24px）或 14pt粗体（19px）及以上

## 性能

### 加载速度

感知速度指数是一个页面加载性能指标，向您显示页面内容的可见填充速度。分数越低越好

### 文件完成

这些指标从初始请求中收集，直到浏览器认为页面已加载（JavaScript onLoad事件）。通常会在所有图像内容均已加载后发生，但可能不包括由javascript执行触发的内容。

### 满载

这些指标是从初始请求开始收集的，直到文档完成（JavaScript onLoad事件）后2秒钟无网络活动为止。这通常包括主页加载后由javascript触发的任何活动

## 易用性

### 基本要求

1. 点击徽标会返回首页

2. 菜单简短，可见

3. 始终在页脚和/或固定页眉上提供导航选项

4. 支持多设备体验

    使用心愿单/收藏夹/购物车；社交分享；电子邮件; 促进设备或移动平台之间的无缝移动

5. 对于包含许多产品的类别页面/搜索结果，使用延迟加载或分页

    异步加载图像-完全加载上述内容后，或有条件地加载图像，仅当它们出现在浏览器的视口中时

6. 可以滑动以查看更多图像或点击以放大图像

    允许滑动或轻击等移动手势来放大图像，图形和其他内容，从而保持良好的质量和焦点

7. 简化表单信息输入

    尽可能减少字段数并自动填充信息。在字段中实现正确的输入类型，即输入类型=电子邮件，数字等。利用tabIndex使用键盘迭代字段

8. 形成错误警告

    如果在现场发生错误，将立即通知用户，并提供有关如何修复它的指导

9. 使站点搜索可见且用户友好

    通过打开的文本字段或清除标签，将网站搜索放在页面顶部附近。提供过滤器，以帮助用户从搜索或按类别对结果分组中获得所需的信息。自动完成功能可在现场搜索中找到

10. 将您的用户保持在单个浏览器窗口中

    在智能手机上的多个窗口之间切换可能会很麻烦，并增加了访问者可能找不到回到您网站的风险。避免通过启动新窗口的号召性用语将用户保持在一个地方。

### 其他不同类型网站的针对性优化

## PWA

### 不建议使用 AppCache

  已弃用，使用 Cache Api

### 不建议使用Web SQL

  已弃用，考虑改用 IndexedDB

### 避免在页面加载时请求地理位置许可

  页面在加载时自动请求用户位置会使用户不信任页面或感到困惑，应改为用户主动触发

### 避免在页面加载时请求通知权限

  同上

### 正确的 robots.txt

### 避免使用过时的API

### 允许粘贴到密码输入字段

### 注册 service worker

  通过它来实现离线使用、推送、添加到主屏幕等功能

### 离线时，请求返回 200

  1. 注册 service worker。

  2. 通过它在本地缓存文件。

  3. 离线时，使用service worker作为网络代理返回缓存的文件

### 使用HTTPS

### 将HTTP流量重定向到HTTPS

    确保将所有HTTP通信重定向到HTTPS

### 使用HTTP / 2

  HTTP / 2具有许多优点，包括二进制标头，多路复用和服务器推送

### 使用被动侦听器改善滚动性能

  在您的触摸和滚轮事件侦听器上设置 passive 选项可提升滚动性能。

### 避免使用 document.write

  对于网速较慢（如 2G、3G 或较慢的 WLAN）的用户，外部脚本通过 document.write() 动态注入会使主要页面内容的显示延迟数十秒。

### 在主屏幕上显示时，short_name不会被截断

    将应用的short_name设置为少于12个字符,以确保它不会在主屏幕上被截断

### 配置为自定义启动屏幕

  类似启动页

### 可以提示用户安装Web App

  浏览器可以主动提示用户将您的应用添加到主屏幕，这可以提高用户参与度